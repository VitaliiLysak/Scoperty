<app-base-modal (dismiss)="close()">
  <ng-container app-base-modal-header>
    Mobiltelefon Ã¤ndern
  </ng-container>

  <ng-container app-base-modal-body>
    <form
      [attr.class]="{block: _name, element: 'form'} | bem"
      [formGroup]="phoneForm"
    >

        <app-form-field label="Mobilfunknummer">
          <input
            id="inputPhone"
            type="text"
            tabindex="1"
            placeholder="Mobilfunknummer eingeben"
            app-input
            appValidateOnBlur [validateFormControl]="phone"
            [formControl]="phone"
            #phoneInput
          >

          <ng-template app-form-field-error-message error="required">
            Mobilfunknummer ist ein Pflichtfeld
          </ng-template>

          <ng-template app-form-field-error-message error="pattern">
            Dein eingegebener Code ist falsch.
          </ng-template>
        </app-form-field>

        <div [attr.class]="{block: _name, element: 'code-button'} | bem">
          <button
            app-button
            buttonStyle="link"
            color="green"
            (click)="getCode()"
          >
            Code anfordern
            <mat-icon svgIcon="chevron_right"></mat-icon>
          </button>
        </div>

        <app-form-field label="Code">
          <input
            id="code"
            type="text"
            tabindex="2"
            placeholder="Code eingeben"
            app-input
            appValidateOnBlur [validateFormControl]="code"
            [formControl]="code"
            #codeInput
          >

          <ng-template app-form-field-error-message error="required">
            Code ist ein Pflichtfeld
          </ng-template>

          <ng-template app-form-field-error-message error="code">
            Dein eingegebener Code ist falsch.
          </ng-template>
        </app-form-field>
    </form>
  </ng-container>

  <ng-container app-base-modal-footer>
    <app-base-modal-actions align="space-between">
      <button
        app-button
        buttonStyle="link"
        size="medium"
        color="green"
        (click)="close()"
      >
        Abbrechen
      </button>
      <button
        app-button
        color="secondary-green"
        size="medium"
        [disabled]="!(phoneForm.valid)"
        (click)="apply()"
      >
        Speichern
      </button>
    </app-base-modal-actions>
  </ng-container>
</app-base-modal>
